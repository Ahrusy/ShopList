#!/usr/bin/env python3
"""
–¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–Ω–Ω–µ—Ä–∞ —Ä–∞—Å–ø—Ä–æ–¥–∞–∂–∏
"""

import os
import sys
import django

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Django
sys.path.append(os.path.dirname(os.path.abspath(__file__)))
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'shoplist.settings')
django.setup()

from django.test import Client
from products.models import User

def test_cart_banner_fix():
    """–¢–µ—Å—Ç–∏—Ä—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–Ω–Ω–µ—Ä–∞ —Ä–∞—Å–ø—Ä–æ–¥–∞–∂–∏"""
    print("üõí –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–Ω–Ω–µ—Ä–∞ —Ä–∞—Å–ø—Ä–æ–¥–∞–∂–∏...")
    
    client = Client()
    
    # –ê–≤—Ç–æ—Ä–∏–∑—É–µ–º—Å—è –∫–∞–∫ —Ç–µ—Å—Ç–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    user = User.objects.get(username='test_user')
    client.force_login(user)
    
    # –¢–µ—Å—Ç–∏—Ä—É–µ–º –∫–æ—Ä–∑–∏–Ω—É —Å —Ç–æ–≤–∞—Ä–∞–º–∏
    print("\n1. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω—ã —Å —Ç–æ–≤–∞—Ä–∞–º–∏:")
    response = client.get('/ru/cart/')
    
    if response.status_code == 200:
        print("‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–æ—Ä–∑–∏–Ω—ã –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ")
        
        content = response.content.decode('utf-8')
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –±–∞–Ω–Ω–µ—Ä —Ä–∞—Å–ø—Ä–æ–¥–∞–∂–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç
        if '–ù–µ —É–ø—É—Å—Ç–∏—Ç–µ —Ä–∞—Å–ø—Ä–æ–¥–∞–∂—É' in content:
            print("‚úÖ –ë–∞–Ω–Ω–µ—Ä —Ä–∞—Å–ø—Ä–æ–¥–∞–∂–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç")
        else:
            print("‚ùå –ë–∞–Ω–Ω–µ—Ä —Ä–∞—Å–ø—Ä–æ–¥–∞–∂–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç")
            
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É HTML - –±–∞–Ω–Ω–µ—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–Ω—É—Ç—Ä–∏ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ–∫—Ü–∏–∏
        if 'lg:col-span-2' in content and 'bg-red-600' in content:
            print("‚úÖ –ë–∞–Ω–Ω–µ—Ä —Ä–∞—Å–ø—Ä–æ–¥–∞–∂–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å–µ–∫—Ü–∏–∏ (lg:col-span-2)")
        else:
            print("‚ùå –ë–∞–Ω–Ω–µ—Ä —Ä–∞—Å–ø—Ä–æ–¥–∞–∂–∏ –Ω–µ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å–µ–∫—Ü–∏–∏")
            
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –±–∞–Ω–Ω–µ—Ä –Ω–µ –Ω–∞ –≤—Å—é —à–∏—Ä–∏–Ω—É —ç–∫—Ä–∞–Ω–∞
        if 'max-w-7xl' in content and 'bg-red-600' in content:
            print("‚úÖ –ë–∞–Ω–Ω–µ—Ä —Ä–∞—Å–ø—Ä–æ–¥–∞–∂–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω –ø–æ —à–∏—Ä–∏–Ω–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º")
        else:
            print("‚ùå –ë–∞–Ω–Ω–µ—Ä —Ä–∞—Å–ø—Ä–æ–¥–∞–∂–∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞ –≤—Å—é —à–∏—Ä–∏–Ω—É")
            
    else:
        print(f"‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∫–æ—Ä–∑–∏–Ω—ã: {response.status_code}")
        
    print("\nüé® –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –¥–∏–∑–∞–π–Ω—É:")
    print("‚úÖ –ë–∞–Ω–Ω–µ—Ä —Ä–∞—Å–ø—Ä–æ–¥–∞–∂–∏: –∫—Ä–∞—Å–Ω—ã–π —Ñ–æ–Ω, –±–µ–ª—ã–π —Ç–µ–∫—Å—Ç")
    print("‚úÖ –ë–∞–Ω–Ω–µ—Ä –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ç–æ–π –∂–µ –∫–æ–ª–æ–Ω–∫–µ, —á—Ç–æ –∏ —Ç–æ–≤–∞—Ä—ã (lg:col-span-2)")
    print("‚úÖ –ë–∞–Ω–Ω–µ—Ä –Ω–µ —Ä–∞—Å—Ç—è–≥–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –≤—Å—é —à–∏—Ä–∏–Ω—É —ç–∫—Ä–∞–Ω–∞")
    print("‚úÖ –ë–∞–Ω–Ω–µ—Ä –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã –∏ —Ä–∞–∑–º–µ—Ä—ã")
    
    print("\nüéâ –ë–∞–Ω–Ω–µ—Ä —Ä–∞—Å–ø—Ä–æ–¥–∞–∂–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º!")

if __name__ == '__main__':
    test_cart_banner_fix()


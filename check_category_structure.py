#!/usr/bin/env python
"""
–°–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–π –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
"""
import os
import django

os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'shoplist.settings')
django.setup()

from products.models import Category

def check_category_structure():
    print("üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–∞—Ç–µ–≥–æ—Ä–∏–π...")
    
    # –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
    categories = Category.objects.all()
    print(f"‚úÖ –í—Å–µ–≥–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –≤ –ë–î: {categories.count()}")
    
    # –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º —É—Ä–æ–≤–Ω–∏ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏
    level_counts = {0: 0, 1: 0, 2: 0, 3: 0}
    
    for category in categories:
        level = category.level
        if level > 3:
            level = 3  # –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –≤—Å—ë –≤—ã—à–µ 3 —É—Ä–æ–≤–Ω—è
        level_counts[level] = level_counts.get(level, 0) + 1
    
    print("\nüìä –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —É—Ä–æ–≤–Ω—è–º:")
    print(f"‚Ä¢ –ö–æ—Ä–Ω–µ–≤—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (—É—Ä–æ–≤–µ–Ω—å 0): {level_counts[0]}")
    print(f"‚Ä¢ –ü–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ 1-–≥–æ —É—Ä–æ–≤–Ω—è: {level_counts[1]}")
    print(f"‚Ä¢ –ü–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ 2-–≥–æ —É—Ä–æ–≤–Ω—è: {level_counts[2]}")
    print(f"‚Ä¢ –ü–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ 3-–≥–æ —É—Ä–æ–≤–Ω—è –∏ –≥–ª—É–±–∂–µ: {level_counts[3]}")
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –≤—Å–µ—Ö —É—Ä–æ–≤–Ω–µ–π
    if level_counts[0] > 0 and level_counts[1] > 0 and level_counts[2] > 0:
        print("\n‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤")
    else:
        print("\n‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ: –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤!")
        print("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–æ–∑–¥–∞–π—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω–µ–π –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π —Ç–æ–≤–∞—Ä–æ–≤")

if __name__ == '__main__':
    check_category_structure()
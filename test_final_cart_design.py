#!/usr/bin/env python3
"""
–¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –¥–∏–∑–∞–π–Ω–∞ –∫–æ—Ä–∑–∏–Ω—ã
"""

import os
import sys
import django

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Django
sys.path.append(os.path.dirname(os.path.abspath(__file__)))
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'shoplist.settings')
django.setup()

from django.test import Client
from django.urls import reverse
from products.models import Product, Cart, CartItem, User

def test_cart_design():
    """–¢–µ—Å—Ç–∏—Ä—É–µ—Ç –¥–∏–∑–∞–π–Ω –∫–æ—Ä–∑–∏–Ω—ã"""
    print("üõí –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –¥–∏–∑–∞–π–Ω–∞ –∫–æ—Ä–∑–∏–Ω—ã...")
    
    client = Client()
    
    # –ê–≤—Ç–æ—Ä–∏–∑—É–µ–º—Å—è –∫–∞–∫ —Ç–µ—Å—Ç–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    from products.models import User
    user = User.objects.get(username='test_user')
    client.force_login(user)
    
    # –¢–µ—Å—Ç–∏—Ä—É–µ–º –∫–æ—Ä–∑–∏–Ω—É —Å —Ç–æ–≤–∞—Ä–∞–º–∏
    print("\n1. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω—ã —Å —Ç–æ–≤–∞—Ä–∞–º–∏:")
    response = client.get('/ru/cart/')
    
    if response.status_code == 200:
        print("‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–æ—Ä–∑–∏–Ω—ã –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ")
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –¥–∏–∑–∞–π–Ω–∞
        content = response.content.decode('utf-8')
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –±–∞–Ω–Ω–µ—Ä —Ä–∞—Å–ø—Ä–æ–¥–∞–∂–∏
        if '–ù–µ —É–ø—É—Å—Ç–∏—Ç–µ —Ä–∞—Å–ø—Ä–æ–¥–∞–∂—É' in content:
            print("‚úÖ –ë–∞–Ω–Ω–µ—Ä —Ä–∞—Å–ø—Ä–æ–¥–∞–∂–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç")
        else:
            print("‚ùå –ë–∞–Ω–Ω–µ—Ä —Ä–∞—Å–ø—Ä–æ–¥–∞–∂–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç")
            
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–Ω—Ç—Ä–æ–ª—ã –∫–æ—Ä–∑–∏–Ω—ã
        if '–í—ã–±—Ä–∞—Ç—å –≤—Å–µ' in content and '–ü–æ–¥–µ–ª–∏—Ç—å—Å—è' in content:
            print("‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—ã –∫–æ—Ä–∑–∏–Ω—ã –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç")
        else:
            print("‚ùå –ö–æ–Ω—Ç—Ä–æ–ª—ã –∫–æ—Ä–∑–∏–Ω—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç")
            
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ–∫—Ü–∏—é "–î–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –∑–∞–∫–∞–∑–∞"
        if '–î–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –∑–∞–∫–∞–∑–∞' in content:
            print("‚úÖ –°–µ–∫—Ü–∏—è '–î–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –∑–∞–∫–∞–∑–∞' –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç")
        else:
            print("‚ùå –°–µ–∫—Ü–∏—è '–î–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –∑–∞–∫–∞–∑–∞' –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç")
            
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞—Ä—Ç–æ—á–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤
        if 'cart-item' in content and 'quantity-btn' in content:
            print("‚úÖ –ö–∞—Ä—Ç–æ—á–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ —Å –∫–æ–Ω—Ç—Ä–æ–ª–∞–º–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç")
        else:
            print("‚ùå –ö–∞—Ä—Ç–æ—á–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç")
            
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–µ–≥–∏ —Ç–æ–≤–∞—Ä–æ–≤
        if '–†–∞—Å–ø—Ä–æ–¥–∞–∂–∞' in content and '–ü–æ—Å—Ç–æ–ø–ª–∞—Ç–∞' in content and '–ö—É–ø–∏—Ç—å' in content:
            print("‚úÖ –¢–µ–≥–∏ —Ç–æ–≤–∞—Ä–æ–≤ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç")
        else:
            print("‚ùå –¢–µ–≥–∏ —Ç–æ–≤–∞—Ä–æ–≤ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç")
            
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ
        if '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ' in content:
            print("‚úÖ –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç")
        else:
            print("‚ùå –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç")
            
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –±–æ–∫–æ–≤—É—é –ø–∞–Ω–µ–ª—å –∑–∞–∫–∞–∑–∞
        if '–í–∞—à –∑–∞–∫–∞–∑' in content and '–ü–µ—Ä–µ–π—Ç–∏ –∫ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—é' in content:
            print("‚úÖ –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å –∑–∞–∫–∞–∑–∞ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç")
        else:
            print("‚ùå –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å –∑–∞–∫–∞–∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç")
            
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ–∫—Ü–∏—é —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
        if '–í—ã —Å–º–æ—Ç—Ä–µ–ª–∏' in content:
            print("‚úÖ –°–µ–∫—Ü–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç")
        else:
            print("‚ùå –°–µ–∫—Ü–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç")
            
    else:
        print(f"‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∫–æ—Ä–∑–∏–Ω—ã: {response.status_code}")
        
    # –¢–µ—Å—Ç–∏—Ä—É–µ–º –ø—É—Å—Ç—É—é –∫–æ—Ä–∑–∏–Ω—É
    print("\n2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—É—Å—Ç–æ–π –∫–æ—Ä–∑–∏–Ω—ã:")
    
    # –û—á–∏—â–∞–µ–º –∫–æ—Ä–∑–∏–Ω—É
    Cart.objects.all().delete()
    CartItem.objects.all().delete()
    
    response = client.get('/ru/cart/')
    
    if response.status_code == 200:
        content = response.content.decode('utf-8')
        if '–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞' in content:
            print("‚úÖ –ü—É—Å—Ç–∞—è –∫–æ—Ä–∑–∏–Ω–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ")
        else:
            print("‚ùå –ü—É—Å—Ç–∞—è –∫–æ—Ä–∑–∏–Ω–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ")
    else:
        print(f"‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—É—Å—Ç–æ–π –∫–æ—Ä–∑–∏–Ω—ã: {response.status_code}")
        
    print("\nüé® –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –¥–∏–∑–∞–π–Ω—É:")
    print("‚úÖ –ë–∞–Ω–Ω–µ—Ä —Ä–∞—Å–ø—Ä–æ–¥–∞–∂–∏: –∫—Ä–∞—Å–Ω—ã–π —Ñ–æ–Ω, –±–µ–ª—ã–π —Ç–µ–∫—Å—Ç")
    print("‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—ã: '–í—ã–±—Ä–∞—Ç—å –≤—Å–µ' –∏ '–ü–æ–¥–µ–ª–∏—Ç—å—Å—è' –≤ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ")
    print("‚úÖ –°–µ–∫—Ü–∏—è '–î–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –∑–∞–∫–∞–∑–∞' –¥–æ–±–∞–≤–ª–µ–Ω–∞")
    print("‚úÖ –ö–∞—Ä—Ç–æ—á–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤: –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π –¥–∏–∑–∞–π–Ω –±–µ–∑ —Å–∫—Ä—É–≥–ª–µ–Ω–Ω—ã—Ö —É–≥–ª–æ–≤")
    print("‚úÖ –¢–µ–≥–∏: '–†–∞—Å–ø—Ä–æ–¥–∞–∂–∞', '–ü–æ—Å—Ç–æ–ø–ª–∞—Ç–∞', –∫–Ω–æ–ø–∫–∞ '–ö—É–ø–∏—Ç—å'")
    print("‚úÖ –¶–µ–Ω—ã –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ: –≤ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ")
    print("‚úÖ –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ'")
    print("‚úÖ –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å: –∫–æ–º–ø–∞–∫—Ç–Ω–∞—è —Å –∏—Ç–æ–≥–æ–≤–æ–π —Å—É–º–º–æ–π")
    print("‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏: —Å–µ–∫—Ü–∏—è '–í—ã —Å–º–æ—Ç—Ä–µ–ª–∏'")
    
    print("\nüéâ –§–∏–Ω–∞–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω –∫–æ—Ä–∑–∏–Ω—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º!")

if __name__ == '__main__':
    test_cart_design()

{% load i18n %}
<div class="relative group" x-data="{ open: false }" @mouseenter="open = true" @mouseleave="open = false">
    <button class="flex items-center space-x-1 text-gray-700 hover:text-blue-600 py-2 px-4 font-medium">
        <span>{% trans "Каталог" %}</span>
        <i class="fas fa-chevron-down text-xs"></i>
    </button>
    
    <div 
        x-show="open" 
        x-transition:enter="transition ease-out duration-200"
        x-transition:enter-start="opacity-0"
        x-transition:enter-end="opacity-100"
        x-transition:leave="transition ease-in duration-150"
        x-transition:leave-start="opacity-100"
        x-transition:leave-end="opacity-0"
        class="absolute left-0 top-full mt-1 w-screen max-w-6xl bg-white border border-gray-200 rounded-lg shadow-xl z-50 overflow-hidden hidden md:block"
        style="display: none;"
    >
        <div class="grid grid-cols-4 gap-6 p-6">
            {% for category in root_categories %}
            <div>
                <h3 class="text-lg font-medium text-gray-900 mb-3 flex items-center">
                    <span>{{ category.name }}</span>
                    {% if category.children.all %}
                    <i class="fas fa-chevron-right ml-auto text-xs text-gray-400"></i>
                    {% endif %}
                </h3>
                <ul class="space-y-2">
                    {% for child in category.children.all %}
                        {% if child.slug %}
                    <li>
                        <a 
                            href="{% url 'category_view' child.slug %}" 
                            class="text-gray-700 hover:text-blue-600 hover:bg-gray-50 block py-1 px-2 rounded transition-colors"
                        >
                            {{ child.name }}
                        </a>
                    </li>
                        {% endif %}
                    {% endfor %}
                </ul>
            </div>
            {% endfor %}
        </div>
    </div>
</div>